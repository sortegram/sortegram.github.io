"use strict"
function downList(){$("#user-names").animate({scrollTop:$("#user-names")[0].scrollHeight},200)}function home(){result.style.color="#FFF",result.style.backgroundColor="rgba(236, 248, 255, 0.5)",result.style.borderTop="3px solid #FFF",result.style.borderBottom="3px solid #FFF",$("#home").removeClass("close").addClass("open"),$("#manage").removeClass("open").addClass("close"),$("#classic").removeClass("open").addClass("close"),$("#sortegram").removeClass("open").addClass("close"),$("#start-sortegram").removeClass("open").addClass("close"),d.getElementById("logo").innerHTML="Sortegram",SSquit(),SCnew()}function SG(){result.style.color="#FFF",result.style.backgroundColor="rgba(236, 248, 255, 0.5)",result.style.borderTop="3px solid #FFF",result.style.borderBottom="3px solid #FFF",$("#manage").removeClass("close").addClass("open"),$("#home").removeClass("open").addClass("close"),$("#classic").removeClass("open").addClass("close"),$("#sortegram").removeClass("open").addClass("close"),$("#start-sortegram").removeClass("open").addClass("close"),d.getElementById("logo").innerHTML="Gerenciar",SSquit(),SCnew()}function Last(){$("#manage").removeClass("close").addClass("open"),$("#sortegram").removeClass("open").addClass("close"),$("#start-sortegram").removeClass("open").addClass("close"),$("#home").removeClass("open").addClass("close")}function editLast(){userName.value="",userName.focus(),$(".new-btn, .back-to-home-btn").hide(),$("#sortegram").removeClass("close").addClass("open"),$("#manage").removeClass("open").addClass("close"),$("#start-sortegram").removeClass("open").addClass("close"),$("#home").removeClass("open").addClass("close"),d.getElementById("logo").innerHTML="Editar",savedNamesEdit=d.getElementById("user-names").innerHTML=_savedNamesEdit,changeNumber(),saveBtn.disabled=!0,saveBtn.innerHTML="Salvo",saveBtn.style.backgroundImage="url(img/ic_done_white_24dp_1x.png)"}function SCnew(){generate.style.display=show,result.style.display=hide,$(".new-btn, .back-to-home-btn").hide(),current.innerHTML="",n.removeAttribute("disabled"),x.removeAttribute("disabled"),y.removeAttribute("disabled"),generate.removeAttribute("disabled")}function SSnew(){SSgenerate.style.display=show,SSresult.style.display=hide,$(".new-btn, .back-to-home-btn").hide(),SScurrent.innerHTML="",SSgenerate.removeAttribute("disabled"),$("#trophy").hide(),NoPdiv.style.display=show,SSresult.style.boxShadow=hide,userName.value="",userName.focus(),$(".new-btn, .back-to-home-btn").hide(),$("#sortegram").removeClass("close").addClass("open"),$("#manage").removeClass("open").addClass("close"),$("#start-sortegram").removeClass("open").addClass("close"),$("#home").removeClass("open").addClass("close"),d.getElementById("logo").innerHTML="Adicionar",savedNamesEdit=d.getElementById("user-names").innerHTML="",d.getElementById("user-names-2").innerHTML="",changeNumber(),sgManage.style.display=hide,saveBtn.disabled=!0,saveBtn.innerHTML="Salvar",saveBtn.style.backgroundImage="url(img/appbar.save.png)"}function SSquit(){SSgenerate.style.display=show,SSresult.style.display=hide,$(".new-btn, .back-to-home-btn").hide(),SScurrent.innerHTML="",SSgenerate.removeAttribute("disabled")}function SCgo(){for(var e=[];e.length<n.value;){for(var s=Math.floor(Math.random()*(+y.value-+x.value+1)+ +x.value),t=!1,l=0;l<e.length;l++)if(e[l]===s){t=!0
break}t||(e[e.length]=s)}if(0!==y.value.length||0!==x.value.length&&x.value.match(/^(\d){0,7}$/g)&&y.value.match(/^(\d){0,7}$/g)&&n.value<=y.value){result.style.color="#888888",result.style.backgroundColor="#FFF",result.style.fontSize="38pt",result.style.borderRadius="0px",d.getElementById("logo").innerHTML="Sorteando",$("#logo").removeClass("logo-blink addfadeIn").addClass("logo-blink"),$(result).removeClass("result-rotate").addClass("result-rotate"),$(result).removeClass("addfadeIn")
var a=setInterval(function(){n.setAttribute("disabled","true"),x.setAttribute("disabled","true"),y.setAttribute("disabled","true"),generate.setAttribute("disabled","true"),generate.style.display=hide,result.style.display=show,result.innerHTML=Math.floor(Math.random()*(+y.value-+x.value+1)+ +x.value),result.innerHTML.length<=5?result.style.fontSize="38pt":result.innerHTML.length>=6&&(result.style.fontSize="20pt")},60)
setTimeout(function(){if(""!==n.value){clearInterval(a),$(".new-btn, .back-to-home-btn").fadeIn(),result.innerHTML=e,result.style.color="#FFF",result.style.backgroundColor="rgba(242, 255, 0, 0.5)",result.style.borderTop="3px solid #FFF",result.style.borderBottom="3px solid #FFF",result.style.marginLeft="-3px",d.getElementById("logo").innerHTML="Resultado",result.innerHTML=result.innerHTML.replace(/,/g," - ")
var s,t=(new Date).toLocaleString(),l=d.getElementById("current");+n.value>1?s="s":1===+n.value?s="":0===+n.value&&(s="s"),l.innerHTML="Número"+s+" gerado"+s+" em "+t+".<br><br>",$("#result").removeClass("addfadeIn result-rotate").addClass("addfadeIn"),$("#logo").removeClass("addfadeIn logo-blink").addClass("addfadeIn"),result.innerHTML.length<=12?result.style.fontSize="38pt":result.innerHTML.length>=13&&(result.style.fontSize="20pt")}},4e3)}else swal("Erro :(","Preencha os campos de número Máximo e Mínimo corretamente.","error")}function changeNumber(){scNoP.innerHTML=$("#user-names > dt").size(),ssNoP.innerHTML=$("#user-names > dt").size(),0===$("#user-names > dt").size()?(d.getElementById("part-plural").innerHTML="s",d.getElementById("part-plural-2").innerHTML="s"):1===$("#user-names > dt").size()?(d.getElementById("part-plural").innerHTML="",d.getElementById("part-plural-2").innerHTML=""):(d.getElementById("part-plural").innerHTML="s",d.getElementById("part-plural-2").innerHTML="s")}function sbmt(){0!==userName.value.length&&userName.value.match(/^@?([\w\W]){1,30}$/g)?(downList(),saveBtn.disabled=!1,deleteBtn.disabled=!1,saveBtn.innerHTML="Salvar",saveBtn.style.backgroundImage="url(img/appbar.save.png)",userName.blur(),userName.select(),savedNamesEdit=d.getElementById("user-names").innerHTML+="<dt><div class='dt-text'>"+userName.value+"</div><div class='delete-user'           onclick='$(this).parent().remove();           sgSaveList();          changeNumber();'></div></dt>",savedNames=d.getElementById("user-names-2").innerHTML+="<dt><div class='dt-text'>"+userName.value+"</div></dt>",changeNumber()):(userName.select(),inputUserNameLabel.innerHTML="Nome de participante inválido!",inputUserNameLabel.style.color="#FFFF00",$(inputUserNameLabel).removeClass("error-shake").addClass("error-shake"),setTimeout(function(){inputUserNameLabel.innerHTML="Digite o nome do participante",inputUserNameLabel.style.color="#66FF73",$(inputUserNameLabel).removeClass("error-shake")},5e3))}function SSgo(){var e=Math.floor(Math.random()*(+ssNoP.innerHTML-1+1)+1),s=e-1
localStorage.setItem("is-new",!0),localStorage.setItem("saved-names",""),localStorage.setItem("saved-names-edit",""),isNew.checked=!0,SSresult.style.color="#FFF",SSresult.style.fontSize="38pt",d.getElementById("logo").innerHTML="Sorteando",$("#logo").removeClass("logo-blink addfadeIn").addClass("logo-blink"),$(SSresult).removeClass("result-rotate").addClass("result-rotate"),$(SSresult).removeClass("addfadeIn"),nbOpsBtn.disabled=!0
var t=setInterval(function(){SSgenerate.setAttribute("disabled","true"),SSgenerate.style.display=hide,SSresult.style.display=show,SSresult.innerHTML=Math.floor(Math.random()*(+ssNoP.innerHTML-1+1)+1),SSresult.innerHTML.length<=10?SSresult.style.fontSize="30pt":SSresult.innerHTML.length<=19?SSresult.style.fontSize="20pt":SSresult.innerHTML.length>=20&&(SSresult.style.fontSize="12pt")},60)
NoPdiv.style.display=hide,$("#user-names-2").removeClass("scroll").addClass("lock-scroll"),$("#SSresult").before("<div id='spinner'></div>"),$("#spinner").fadeIn(),setTimeout(function(){$("#user-names-2").animate({scrollTop:$("#user-names-2 dt:nth-child(1)").position().top},400),clearInterval(t),SSresult.innerHTML=e,SSresult.style.color="#FFF",SSresult.style.backgroundColor="transparent",d.getElementById("logo").innerHTML="Resultado"
var l,a=(new Date).toLocaleString(),o=d.getElementById("SScurrent");+n.value>1?l="s":1===+n.value?l="":0===+n.value&&(l="s"),$("#SSresult").before("<div id='trophy'></div>"),$("#trophy").show("bounce"),$("#spinner").fadeOut(),nbOpsBtn.disabled=!1,o.innerHTML="Sorteio feito em "+a+".<br><br>",$("#logo").removeClass("addfadeIn logo-blink").addClass("addfadeIn"),setTimeout(function(){1===e?$("#user-names-2").animate({scrollTop:$("#user-names-2 dt:nth-child("+e+")").position().top},1e3):$("#user-names-2").animate({scrollTop:$("#user-names-2 dt:nth-child("+s+")").position().top},1e3),$("#user-names-2 dt:nth-child("+e+")").css({"background-color":"#FFF",color:"#000",border:"3px solid #F00"}),$("#user-names-2").removeClass("lock-scroll").addClass("scroll"),SSresult.innerHTML=$("#user-names-2 dt:nth-child("+e+")").children().html(),SSresult.style.backgroundColor="#37BD1E",SSresult.style.boxShadow="0px 10px 10px #0A3E00",$(".new-btn, .back-to-home-btn").show(),SSresult.innerHTML.length<=10?SSresult.style.fontSize="30pt":SSresult.innerHTML.length<=19?SSresult.style.fontSize="20pt":SSresult.innerHTML.length>=20&&(SSresult.style.fontSize="12pt")},2e3)},4e3)}function sgSaveList(){localStorage.setItem("is-new",!1),localStorage.setItem("saved-names",savedNames),localStorage.setItem("saved-names-edit",savedNamesEdit)}function classicRaffle(){$(".new-btn, .back-to-home-btn").hide(),$("#manage").addClass("close").removeClass("open"),$("#home").removeClass("open").addClass("close"),$("#classic").removeClass("close").addClass("open"),d.getElementById("logo").innerHTML="Clássico"}function sgRaffle(){isNew.checked===!0?SSnew():isNew.checked===!1&&Last()}function deleteRaffle(){swal({title:"Certeza?",text:"Deseja mesmo excluir esse sorteio?",type:"warning",showCancelButton:!0,confirmButtonColor:"#35B138",cancelButtonText:"Não",confirmButtonText:"Sim",allowOutsideClick:!0,closeOnConfirm:!1},function(){savedNames=d.getElementById("user-names").innerHTML="",d.getElementById("user-names-2").innerHTML="",sgSaveList(),changeNumber(),home(),sgManage.style.display=hide,localStorage.setItem("is-new",!0),localStorage.setItem("saved-names",""),localStorage.setItem("saved-names-edit",""),isNew.checked=!0,swal({title:"Pronto!",text:"Sorteio excluído.",type:"success",timer:5e3,allowOutsideClick:!0}),Reload()})}function removeAllNoConfirm(){savedNamesEdit=d.getElementById("user-names").innerHTML="",d.getElementById("user-names-2").innerHTML="",localStorage.setItem("saved-names",""),localStorage.setItem("saved-names-edit",""),sgSaveList(),changeNumber(),sgManage.style.display=hide}function sgSaveRaffle(){return $("#user-names > dt").size()>0?(sgSaveList(),changeNumber(),sgManage.style.display=show,saveBtn.disabled=!0,saveBtn.innerHTML="Salvo",saveBtn.style.backgroundImage="url(img/ic_done_white_24dp_1x.png)",Reload(),void 0):!1}function sgRaffleReady(){isNew.checked&&$("#user-names > dt").size()>1?($("#start-sortegram").removeClass("close").addClass("open"),$("#manage").removeClass("open").addClass("close"),$("#home").removeClass("open").addClass("close"),$("#sortegram").removeClass("open").addClass("close"),$("#user-names-2").removeClass("lock-scroll").addClass("scroll"),d.getElementById("logo").innerHTML="Sortegram",localStorage.setItem("is-new",!0),localStorage.setItem("saved-names",""),localStorage.setItem("saved-names-edit",""),isNew.checked=!0,sgManage.style.display=hide):!isNew.checked&&""!==_savedNames&&$("#user-names > dt").size()>1?(savedNames=d.getElementById("user-names-2").innerHTML=_savedNames,$("#start-sortegram").removeClass("close").addClass("open"),$("#manage").removeClass("open").addClass("close"),$("#sortegram").removeClass("open").addClass("close"),$("#user-names-2").removeClass("lock-scroll").addClass("scroll"),d.getElementById("logo").innerHTML="Sortegram",localStorage.setItem("is-new",!0),localStorage.setItem("saved-names",""),localStorage.setItem("saved-names-edit",""),isNew.checked=!0,sgManage.style.display=hide):swal({title:"Erro :(",text:"O sorteio precisa ter pelo menos 2 participantes!",type:"error",timer:1e4,allowOutsideClick:!0}),Reload()}function Reload(){$("#script").remove()
var e=d.createElement("script")
e.id="script",e.src="js/sortegram.min.js",d.body.appendChild(e)}var d=document,w=window,generate=d.getElementById("generate"),SSgenerate=d.getElementById("ss-generate"),minMax=$(".min-max"),show="block",hide="none",green=["#116D01","",""],blue=["#1763D0","",""],red=["#BB2E2E","",""],yellow=["#C3A91F","",""],orange=["#C7781B","",""],pink=["#C35AC1","",""],lilac=["#9B4AD0","",""],cyan=["#009BA9","",""],violet=["#96197C","",""],n=d.getElementById("n"),x=d.getElementById("x"),y=d.getElementById("y"),$bg_uiColor=$("#cover, #sidebar"),$btn_uiColor=$(".new-btn, #result, #SSresult, #sg-save, #sg-done"),$fnt_uiColor=$("#input-username-lbl"),result=d.getElementById("result"),SSresult=d.getElementById("SSresult"),userName=d.getElementById("username"),inputUserNameLabel=d.getElementById("input-username-lbl"),scNoP=d.getElementById("number-of-participants"),ssNoP=d.getElementById("number-of-participants-2"),newOp=d.getElementById("newOp"),sgManage=d.getElementById("sgManage"),NoPdiv=d.getElementById("NoPdiv"),savedNames=d.getElementById("user-names-2"),savedNamesEdit=d.getElementById("user-names"),saveBtn=d.getElementById("sg-save"),deleteBtn=d.getElementById("delete-all"),isNew=d.getElementById("is-new"),nbOpsBtn=d.getElementById("navbar-ops-btn"),nbOpsBtnClose=d.getElementById("navbar-ops-btn-close"),_uiColor=localStorage.getItem("ui-color"),_isNew=localStorage.getItem("is-new"),_savedNames=localStorage.getItem("saved-names"),_savedNamesEdit=localStorage.getItem("saved-names-edit")
setInterval(function(){"true"===_isNew?isNew.checked=!0:isNew.checked=!1},100),localStorage["is-new"]?_isNew===!0?sgManage.style.display=hide:_isNew===!1&&(sgManage.style.display=show,deleteBtn.disabled=!1):(localStorage.setItem("is-new",!0),localStorage.setItem("saved-names",""),localStorage.setItem("saved-names-edit",""),sgManage.style.display=hide,d.location.reload()),localStorage["ui-color"]?"green"===_uiColor?$bg_uiColor.css("background",green[0]):"blue"===_uiColor?$bg_uiColor.css("background",blue[0]):"red"===_uiColor?$bg_uiColor.css("background",red[0]):"yellow"===_uiColor?$bg_uiColor.css("background",yellow[0]):"orange"===_uiColor?$bg_uiColor.css("background",orange[0]):"pink"===_uiColor?$bg_uiColor.css("background",pink[0]):"lilac"===_uiColor?$bg_uiColor.css("background",lilac[0]):"cyan"===_uiColor?$bg_uiColor.css("background",cyan[0]):"violet"===_uiColor&&$bg_uiColor.css("background",violet[0]):localStorage.setItem("ui-color",""),$(scNoP).html($("#user-names > dt").size()),0===$("#user-names > dt").size()?(d.getElementById("part-plural").innerHTML="s",d.getElementById("part-plural-2").innerHTML="s"):1===$("#user-names > dt").size()?(d.getElementById("part-plural").innerHTML="",d.getElementById("part-plural-2").innerHTML=""):(d.getElementById("part-plural").innerHTML="s",d.getElementById("part-plural-2").innerHTML="s"),nbOpsBtn.addEventListener("click",function(){$("#sidebar").removeClass("close").addClass("open"),d.getElementById("sidebar-overlay").style.display=show,nbOpsBtn.style.display=hide,nbOpsBtnClose.style.display=show}),d.addEventListener("click",function(e){(!$(e.target).closest("#sidebar, #navbar-ops-btn").length||$(e.target).closest(".sidebar-op").length)&&($("#sidebar").removeClass("open").addClass("close"),d.getElementById("sidebar-overlay").style.display=hide,nbOpsBtnClose.style.display=hide,nbOpsBtn.style.display=show)}),$("#n, #x, #y").on("focus",function(){this.select()}),$(d).contextmenu(function(){return!1}),d.getElementById("classic-raffle").addEventListener("click",function(){classicRaffle()}),d.getElementById("sg-save").addEventListener("click",function(){sgSaveRaffle()}),d.getElementById("sg-done").addEventListener("click",function(){sgRaffleReady()}),$(".ui-color-picker .ui-color").on("click",function(){$(this).hasClass("verde")?($bg_uiColor.css("background",green[0]),localStorage.setItem("ui-color","green")):$(this).hasClass("azul")?($bg_uiColor.css("background",blue[0]),localStorage.setItem("ui-color","blue")):$(this).hasClass("vermelho")?($bg_uiColor.css("background",red[0]),localStorage.setItem("ui-color","red")):$(this).hasClass("amarelo")?($bg_uiColor.css("background",yellow[0]),localStorage.setItem("ui-color","yellow")):$(this).hasClass("laranja")?($bg_uiColor.css("background",orange[0]),localStorage.setItem("ui-color","orange")):$(this).hasClass("rosa")?($bg_uiColor.css("background",pink[0]),localStorage.setItem("ui-color","pink")):$(this).hasClass("lilas")?($bg_uiColor.css("background",lilac[0]),localStorage.setItem("ui-color","lilac")):$(this).hasClass("ciano")?($bg_uiColor.css("background",cyan[0]),localStorage.setItem("ui-color","cyan")):$(this).hasClass("violeta")&&($bg_uiColor.css("background",violet[0]),localStorage.setItem("ui-color","violet"))}),x.oninput=function(){d.getElementById("x").setAttribute("max",y.value-2)},n.onchange=function(){(+n.value>=+y.value||+n.value>+y.value-x.value)&&(n.value=y.value-x.value),+x.value>+y.value&&(x.value=y.value-2),0===+n.value&&(n.value=1,d.getElementById("numb-plural").innerHTML=""),+n.value>100&&(n.value=100,d.getElementById("numb-plural").innerHTML="s")},x.onchange=function(){+x.value>=+y.value&&(x.value=y.value-2),(+n.value>=+y.value||+n.value>+y.value-x.value)&&(n.value=y.value-x.value)},n.oninput=function(){this.value.length>3&&(this.value=this.value.slice(0,3)),d.getElementById("n").setAttribute("max",y.value-x.value-1),+n.value>1?d.getElementById("numb-plural").innerHTML="s":1===+n.value?d.getElementById("numb-plural").innerHTML="":0===+n.value&&(d.getElementById("numb-plural").innerHTML="s")},x.oninput=function(){this.value.length>7&&(this.value=this.value.slice(0,7))},y.oninput=function(){this.value.length>7&&(this.value=this.value.slice(0,7))},userName.oninput=function(){this.value.length>30&&(this.value=this.value.slice(0,30))}
var viewPortScale=1/window.devicePixelRatio
$("#viewport").attr("content","user-scalable=no, initial-scale="+viewPortScale+", width=device-width")
